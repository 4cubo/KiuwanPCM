{"version":3,"sources":["../../../../staging/src/shared/services/shortcut-action.service.ts"],"names":[],"mappings":"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","file":"shortcut-action.service.js","sourceRoot":"","sourcesContent":["/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Injectable } from '@angular/core';\nimport { List } from 'immutable';\n\nimport { EmptyValueService } from './empty-value.service';\nimport { JsonStoreService } from './json-store.service';\nimport { JsonSchemaService } from './json-schema.service';\nimport { DomUtilService } from './dom-util.service';\nimport { PathUtilService } from './path-util.service';\nimport { KeysStoreService } from './keys-store.service';\nimport { JSONSchema, ShortcutActionFunction } from '../interfaces';\n\n\nexport class ShortcutActionService {\n\n  constructor(public emptyValueService: EmptyValueService,\n    public domUtilService: DomUtilService,\n    public jsonStoreService: JsonStoreService,\n    public jsonSchemaService: JsonSchemaService,\n    public pathUtilService: PathUtilService,\n    public keysStoreService: KeysStoreService) { }\n\n  addToRootAction(path: Array<any>): void {\n    this.add(path, true);\n  }\n\n  addAction(path: Array<any>): void {\n    this.add(path, false);\n  }\n\n  private add(path: Array<any>, root: boolean): void {\n    const _path = this.pathUtilService.getNearestOrRootArrayParentInPath(path, root);\n    this.addNewElementInArray(_path, this.jsonSchemaService.forPathArray(_path));\n  }\n\n  /**\n   * @param path - Path of the array parent that the element is about to be inserted\n   * @param schema - Schema of the element that is about to be inserted\n   */\n  private addNewElementInArray(path: Array<any>, schema: JSONSchema) {\n    const itemSchema = schema.items;\n    const emptyValue = this.emptyValueService.generateEmptyValue(itemSchema);\n    const values = this.jsonStoreService.getIn(path) || List();\n    this.jsonStoreService.setIn(path, values.push(emptyValue));\n    path.push(values.size);\n    this.waitThenFocus(this.pathUtilService.toPathString(path));\n  }\n\n  addBelowToRootAction(path: Array<any>): void {\n    const rootPath = this.pathUtilService.getNearestOrRootArrayParentInPath(path, true);\n    const schema = this.jsonSchemaService.forPathArray(rootPath);\n    const itemSchema = schema.items;\n    const emptyValue = this.emptyValueService.generateEmptyValue(itemSchema);\n    const values = this.jsonStoreService.getIn(rootPath) || List();\n    this.jsonStoreService.setIn(rootPath, values.insert(path[1] + 1, emptyValue));\n    rootPath.push(path[1] + 1);\n    this.waitThenFocus(this.pathUtilService.toPathString(rootPath));\n  }\n\n  moveUpAction(path: Array<any>): void {\n    this.move(path, -1);\n  }\n\n  moveDownAction(path: Array<any>): void {\n    this.move(path, 1);\n  }\n\n  moveUpRootAction(path: Array<any>): void {\n    this.move(path, -1, true);\n  }\n\n  moveDownRootAction(path: Array<any>): void {\n    this.move(path, 1, true);\n  }\n\n  /**\n   * @param path - Path of the element that is moved\n   * @param direction - Movement direction. -1 for UP, +1 for DOWN\n   */\n  private move(path: Array<any>, direction: number, root = false): void {\n    this.domUtilService.blurFirstEditableChildById(this.pathUtilService.toPathString(path));\n    const index = this.pathUtilService.getElementIndexInForwardOrReversePath(path, root);\n    path = this.jsonStoreService.moveIn(this.pathUtilService.getNearestOrRootArrayParentInPath(path, root), index, direction);\n    const pathString = this.pathUtilService.toPathString(path);\n    this.waitThenFocus(pathString);\n  }\n\n  deleteAction(path: Array<any>) {\n    // blur element before delete for ensuring that `commitValueChange` will not show again the deleted value\n    this.domUtilService.blurFirstEditableChildById(this.pathUtilService.toPathString(path));\n    this.deleteElement(this.pathUtilService.getNearestOrRootArrayParentInPath(path, false),\n      this.pathUtilService.getElementIndexInForwardOrReversePath(path, false));\n  }\n\n  /**\n   * @param path - Path of the element's array parent\n   * @param index - Index of the element that is deleted from array parent path\n   */\n  private deleteElement(path: Array<any>, index: number) {\n    const values = this.jsonStoreService.getIn(path);\n    this.jsonStoreService.setIn(path, values.remove(index));\n  }\n\n  navigateUpAction(path: Array<any>): void {\n    this.navigateUpDown(path, -1);\n  }\n\n  navigateDownAction(path: Array<any>): void {\n    this.navigateUpDown(path, 1);\n  }\n\n  /**\n   * @param path - Path of the element that is focused\n   * @param direction - Navigation direction. -1 for UP, +1 for DOWN\n   */\n  private navigateUpDown(path: Array<any>, direction: number) {\n    const values = this.jsonStoreService.getIn(this.pathUtilService.getNearestOrRootArrayParentInPath(path, false));\n    if (List.isList(values)) {\n      const elemIndexInPath = this.pathUtilService.getElementIndexInForwardOrReversePath(path, true);\n      if ((elemIndexInPath + direction) < values.size && (elemIndexInPath + direction) >= 0) {\n        path[path.length - 2] = elemIndexInPath + direction;\n      } else {\n        path[path.length - 2] = values.size - Math.abs((elemIndexInPath + direction));\n      }\n      const pathString = this.pathUtilService.toPathString(path);\n      this.domUtilService.focusAndSelectFirstEditableChildById(pathString);\n    }\n  }\n\n  navigateLeftAction(path: Array<any>): void {\n    this.navigateRightLeft(path, -1);\n  }\n\n  navigateRightAction(path: Array<any>): void {\n    this.navigateRightLeft(path, 1);\n  }\n\n  /**\n   * @param path - Path of the element that is focused\n   * @param direction - Navigation direction. -1 for LEFT, +1 for RIGHT\n   */\n  private navigateRightLeft(path: Array<any>, direction: number) {\n    const pathString = this.pathUtilService.toPathString(path);\n    this.domUtilService.focusRightOrLeftParentCell(pathString, direction);\n  }\n\n  /**\n   * Copies the current row in table below and sets the value of the previous focused field to empty in the new row\n   * @param path - Path\n   */\n  copyAction(path: Array<any>) {\n    this.copyRowOrSchemaBelow(path, false);\n  }\n\n  /**\n   * Copies the root parent element below(eg creates a new author in authors list)\n   * when you edit an author's field)\n   * @param path - Path\n   */\n  copyFromRootAction(path: Array<any>) {\n    this.copyRowOrSchemaBelow(path, true);\n  }\n\n  /**\n   * @param originalPath - Path of the element that is copied\n   * @param root - Copy item from parent or root. Set to true for usage as in `copyFromRootAction` and false\n   * for usage as in `copyAction`\n   */\n  private copyRowOrSchemaBelow(originalPath: Array<any>, root: boolean) {\n    const arrayParentPath = this.pathUtilService.getNearestOrRootArrayParentInPath(originalPath, root);\n    if (this.jsonSchemaService.forPathArray(arrayParentPath)['items'].hasOwnProperty('properties')) {\n      const elemIndex = this.pathUtilService.getElementIndexInForwardOrReversePath(originalPath, root);\n      const valuesList = this.jsonStoreService.getIn(arrayParentPath) || List();\n      let newValue = valuesList.get(elemIndex);\n      const newPath = arrayParentPath.concat(elemIndex + 1);\n      let newPathString = this.pathUtilService.toPathString(newPath);\n      if (!root) {\n        newValue = newValue.set(originalPath[originalPath.length - 1]);\n        newPathString = `${newPathString}${this.pathUtilService.separator}${originalPath[originalPath.length - 1]}`;\n      }\n      this.jsonStoreService.setIn(arrayParentPath, valuesList.insert(elemIndex + 1, newValue));\n      this.waitThenFocus(newPathString);\n    }\n  }\n\n  undoAction() {\n    const rolledBackPath = this.jsonStoreService.rollbackLastChange();\n    if (rolledBackPath) {\n      this.waitThenFocus(rolledBackPath);\n    }\n  }\n\n  private waitThenFocus(path: string) {\n    setTimeout(() => {\n      this.domUtilService.focusAndSelectFirstEditableChildById(path, true);\n    });\n  }\n\n  generateShortcutAction(actionName: string): ShortcutActionFunction {\n\n    return (event: KeyboardEvent) => {\n      event.preventDefault();\n      const eventTarget = event.target as HTMLInputElement;\n      const pathString = eventTarget.getAttribute('data-path');\n      if (pathString) {\n        this[actionName](this.pathUtilService.toPathArray(pathString));\n      }\n      return false;\n    };\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: EmptyValueService, },\n{type: DomUtilService, },\n{type: JsonStoreService, },\n{type: JsonSchemaService, },\n{type: PathUtilService, },\n{type: KeysStoreService, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}
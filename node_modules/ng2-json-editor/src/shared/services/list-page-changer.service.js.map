{"version":3,"sources":["../../../../staging/src/shared/services/list-page-changer.service.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;EAoBE;AAEF,OAAO,EAAE,UAAA,EAAW,MAAO,eAAA,CAAgB;AAC3C,OAAO,EAAE,aAAA,EAAc,MAAO,oBAAA,CAAqB;AAEnD,OAAO,EAAE,eAAA,EAAgB,MAAO,qBAAA,CAAsB;AAGtD;IAKE,gCAAoB,eAAgC;QAAhC,oBAAe,GAAf,eAAe,CAAiB;QAH5C,mBAAc,GAA8C,EAAE,CAAC;QAC/D,oBAAe,GAA+B,EAAE,CAAC;IAED,CAAC;IAEzD;;;;;OAKG;IACH,2CAAU,GAAV,UAAW,QAAgB;QACzB,IAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QACjE,IAAM,SAAS,GAAG,aAAa,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAW,CAAC;QACpE,IAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/E,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAClC,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;YACpD,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,CAAC;IACH,CAAC;IAED,sDAAqB,GAArB,UAAsB,QAAgB,EAAE,YAAoB;QAC1D,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,YAAY,CAAC;QAC9C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,GAAG,IAAI,aAAa,CAAS,CAAC,CAAC,CAAC;QAC7D,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IACvC,CAAC;IASH,6BAAC;AAAD,CArCA,AAqCC;;AAPM,iCAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;CACnB,CAAC;AACF,kBAAkB;AACX,qCAAc,GAAmE,cAAM,OAAA;IAC9F,EAAC,IAAI,EAAE,eAAe,GAAG;CACxB,EAF6F,CAE7F,CAAC","file":"list-page-changer.service.js","sourceRoot":"","sourcesContent":["/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\n\nimport { PathUtilService } from './path-util.service';\n\n\nexport class ListPageChangerService {\n\n  private pageChange$Map: { [path: string]: ReplaySubject<number> } = {};\n  private itemsPerPageMap: { [path: string]: number } = {};\n\n  constructor(private pathUtilService: PathUtilService) { }\n\n  /**\n   * Changes the page of the list so that requested item is visible on UI\n   * It doesn't do anything if given path's parent is not paginated list.\n   *\n   * @param itemPath path to a list item\n   */\n  changePage(itemPath: string) {\n    const itemPathArray = this.pathUtilService.toPathArray(itemPath);\n    const itemIndex = itemPathArray[itemPathArray.length - 1] as number;\n    const listPath = this.pathUtilService.toPathString(itemPathArray.slice(0, -1));\n    if (this.pageChange$Map[listPath]) {\n      const itemsPerPage = this.itemsPerPageMap[listPath];\n      const page = Math.floor((itemIndex / itemsPerPage) + 1);\n      this.pageChange$Map[listPath].next(page);\n    }\n  }\n\n  registerPaginatedList(listPath: string, itemsPerPage: number): ReplaySubject<number> {\n    this.itemsPerPageMap[listPath] = itemsPerPage;\n    this.pageChange$Map[listPath] = new ReplaySubject<number>(1);\n    return this.pageChange$Map[listPath];\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: PathUtilService, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}
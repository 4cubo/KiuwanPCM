{"version":3,"sources":["../../../../staging/src/shared/services/component-type.service.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;EAoBE;AAEF,OAAO,EAAE,UAAA,EAAW,MAAO,eAAA,CAAgB;AAK3C;IAAA;IAkEA,CAAC;IAhEC;;;;;;;;;;;OAWG;IACH,+CAAgB,GAAhB,UAAiB,MAAkB;QACjC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACZ,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;QACzC,CAAC;QAED,IAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC;QAC/B,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAChB,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACrC,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBAChC,MAAM,CAAC,cAAc,CAAC;YACxB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,MAAM,CAAC;YAChB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,KAAK,OAAO,CAAC,CAAC,CAAC;YAClC,IAAM,YAAU,GAAG,MAAM,CAAC,KAAK,CAAC;YAChC,EAAE,CAAC,CAAC,YAAU,CAAC,IAAI,KAAK,QAAQ,IAAI,CAAC,YAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACnE,yCAAyC;gBACzC,uEAAuE;gBACvE,4BAA4B;gBAC5B,IAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,YAAU,CAAC,UAAU,CAAC;qBACtD,IAAI,CAAC,UAAA,IAAI;oBACR,IAAM,UAAU,GAAG,YAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBAC/C,MAAM,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,QAAQ,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;wBACrE,CAAC,UAAU,CAAC,IAAI,KAAK,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,KAAK,QAAQ,IAAI,UAAU,CAAC,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;gBAC/G,CAAC,CAAC,CAAC;gBACL,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;oBACnB,MAAM,CAAC,cAAc,CAAC;gBACxB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,YAAY,CAAC;gBACtB,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,sCAAsC;gBACtC,MAAM,CAAC,gBAAgB,CAAC;YAC1B,CAAC;QACH,CAAC;QACD,iDAAiD;QACjD,mFAAmF;QACnF,MAAM,CAAC,UAAU,CAAC;IACpB,CAAC;IAOH,2BAAC;AAAD,CAlEA,AAkEC;;AANM,+BAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;CACnB,CAAC;AACF,kBAAkB;AACX,mCAAc,GAAmE,cAAM,OAAA,EAC7F,EAD6F,CAC7F,CAAC","file":"component-type.service.js","sourceRoot":"","sourcesContent":["/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\nimport { JSONSchema } from '../interfaces';\n\n\nexport class ComponentTypeService {\n\n  /**\n   * It returns the editor specific type of given schema\n   * In other words, which component to use for given schema.\n   *\n   * Possible values:\n   *  - string, number, boolean, object, enum\n   *  - primitive-list, table-list, complex-list\n   *  - disabled, autocomplete\n   *\n   * @param {Object} schema\n   * @return {string}\n   */\n  getComponentType(schema: JSONSchema): string {\n    if (!schema) {\n      throw new Error('schema is undefined');\n    }\n\n    const schemaType = schema.type;\n    if (!schemaType) {\n      if (Object.keys(schema).length === 0) { // if shema === {} (empty object)\n        return 'raw';\n      }\n    } else if (schemaType === 'string') {\n      if (schema.autocompletionConfig) {\n        return 'autocomplete';\n      } else if (schema.enum) {\n        return 'enum';\n      }\n    } else if (schemaType === 'object') {\n      if (schema.properties['$ref']) {\n        return 'ref';\n      }\n    } else if (schemaType === 'array') {\n      const itemSchema = schema.items;\n      if (itemSchema.type === 'object' && !itemSchema.properties['$ref']) {\n        // complex-array: if it's an object array\n        // if its elements have at least a property with object (not ref-field)\n        // or a non-primitive array.\n        const isComplexArray = Object.keys(itemSchema.properties)\n          .some(prop => {\n            const propSchema = itemSchema.properties[prop];\n            return (propSchema.type === 'object' && !propSchema.properties['$ref']) ||\n              (propSchema.type === 'array' && (propSchema.items.type === 'object' || propSchema.items.type === 'array'));\n          });\n        if (isComplexArray) {\n          return 'complex-list';\n        } else {\n          return 'table-list';\n        }\n      } else {\n        // if schema.items.type is not object!\n        return 'primitive-list';\n      }\n    }\n    // execution reaches here if schemaType is either\n    // 'number', 'integer', 'string' or something else which is currently not supported\n    return schemaType;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}
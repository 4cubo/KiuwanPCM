{"version":3,"sources":["../../../../staging/src/shared/directives/shortcuts.directive.ts"],"names":[],"mappings":"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","file":"shortcuts.directive.js","sourceRoot":"","sourcesContent":["/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  ElementRef,\n  Directive,\n  Input,\n  OnChanges,\n  OnDestroy,\n  SimpleChanges\n} from '@angular/core';\n\nimport 'mousetrap';\n\nimport { ShortcutActionService } from '../services';\nimport { Shortcut, CustomShortcutKeys } from '../interfaces';\n\n\nexport class ShortcutsDirective implements OnDestroy, OnChanges {\n  // custom shortcut keys\n   shortcuts: CustomShortcutKeys;\n\n  // actions with default shortcut keys, update with the custom keys later\n  private readonly actionNameToShortcut: { [actionName: string]: Shortcut } = {\n    add: {\n      key: 'alt+a',\n      action: this.shortcutActionService.generateShortcutAction('addAction')\n    },\n    addToRoot: {\n      key: 'mod+shift+a',\n      action: this.shortcutActionService.generateShortcutAction('addToRootAction')\n    },\n    addBelowToRoot: {\n      key: 'mod+shift+b',\n      action: this.shortcutActionService.generateShortcutAction('addBelowToRootAction')\n    },\n    moveUp: {\n      key: 'mod+shift+up',\n      action: this.shortcutActionService.generateShortcutAction('moveUpAction')\n    },\n    moveDown: {\n      key: 'mod+shift+down',\n      action: this.shortcutActionService.generateShortcutAction('moveDownAction')\n    },\n    moveUpRoot: {\n      key: 'mod+alt+up',\n      action: this.shortcutActionService.generateShortcutAction('moveUpRootAction')\n    },\n    moveDownRoot: {\n      key: 'mod+alt+down',\n      action: this.shortcutActionService.generateShortcutAction('moveDownRootAction')\n    },\n    delete: {\n      key: 'mod+backspace',\n      action: this.shortcutActionService.generateShortcutAction('deleteAction')\n    },\n    navigateUp: {\n      key: 'mod+up',\n      action: this.shortcutActionService.generateShortcutAction('navigateUpAction')\n    },\n    navigateDown: {\n      key: 'mod+down',\n      action: this.shortcutActionService.generateShortcutAction('navigateDownAction')\n    },\n    navigateLeft: {\n      key: 'mod+left',\n      action: this.shortcutActionService.generateShortcutAction('navigateLeftAction')\n    },\n    navigateRight: {\n      key: 'mod+right',\n      action: this.shortcutActionService.generateShortcutAction('navigateRightAction')\n    },\n    copy: {\n      key: 'alt+c',\n      action: this.shortcutActionService.generateShortcutAction('copyAction')\n    },\n    copyFromRoot: {\n      key: 'mod+alt+r',\n      action: this.shortcutActionService.generateShortcutAction('copyFromRootAction')\n    },\n    undo: {\n      key: 'mod+alt+z',\n      action: this.shortcutActionService.generateShortcutAction('undoAction')\n    }\n  };\n  private mousetrap: MousetrapInstance;\n\n  constructor(private el: ElementRef,\n    private shortcutActionService: ShortcutActionService) {\n    this.mousetrap = new Mousetrap(this.el.nativeElement);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const customShortcutKeysChange = changes['shortcuts'];\n    if (customShortcutKeysChange) {\n      const actionNames = Object.keys(this.actionNameToShortcut);\n      // if custom shortcut keys are set\n      if (this.shortcuts) {\n        actionNames.forEach(actionName => {\n          const shortcut = this.actionNameToShortcut[actionName];\n          if (this.shortcuts[actionName]) {\n            // override shortcut key\n            shortcut.key = this.shortcuts[actionName];\n          }\n          this.mousetrap.bind(shortcut.key, shortcut.action);\n        });\n      } else {\n        actionNames.forEach(actionName => {\n          const shortcut = this.actionNameToShortcut[actionName];\n          this.mousetrap.bind(shortcut.key, shortcut.action);\n        });\n      }\n\n    }\n  }\n\n\n  ngOnDestroy() {\n    Object.keys(this.actionNameToShortcut)\n      .forEach(actionName => {\n        this.mousetrap.unbind(this.actionNameToShortcut[actionName].key);\n      });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[shortcuts]'\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: ShortcutActionService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'shortcuts': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}
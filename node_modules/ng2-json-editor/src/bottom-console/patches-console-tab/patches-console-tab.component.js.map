{"version":3,"sources":["../../../../staging/src/bottom-console/patches-console-tab/patches-console-tab.component.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;GAoBG;;;;;;;;;;;AAEH,OAAO,EACL,SAAS,EACT,uBAAuB,EAEvB,iBAAiB,EAClB,MAAM,eAAA,CAAgB;AAEvB,OAAO,EAAE,2BAAA,EAA4B,MAAO,2BAAA,CAA4B;AACxE,OAAO,EAAE,cAAA,EAAgB,eAAA,EAAiB,gBAAA,EAAiB,MAAO,uBAAA,CAAwB;AAI1F;IAAgD,8CAA2B;IAIzE,oCAAoB,cAA8B,EACxC,eAAgC,EAChC,gBAAkC,EAClC,iBAAoC;QAH9C,YAIE,iBAAO,SACR;QALmB,oBAAc,GAAd,cAAc,CAAgB;QACxC,qBAAe,GAAf,eAAe,CAAiB;QAChC,sBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,uBAAiB,GAAjB,iBAAiB,CAAmB;QAL9C,aAAO,GAAqB,EAAE,CAAC;;IAO/B,CAAC;IAED,6CAAQ,GAAR;QAAA,iBAYC;QAXC,IAAI,CAAC,gBAAgB,CAAC,cAAc;aACjC,GAAG,CAAC,UAAA,aAAa;YAChB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;iBAC9B,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,aAAa,CAAC,IAAI,CAAC,EAAnB,CAAmB,CAAC;iBAChC,MAAM,CAAC,UAAC,GAAG,EAAE,GAAG,IAAK,OAAA,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,EAAf,CAAe,EAAE,EAAE,CAAC,CAAC;QAC/C,CAAC,CAAC;aACD,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC;aAC3B,SAAS,CAAC,UAAA,OAAO;YAChB,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,KAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;QACxC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,+CAAU,GAAV,UAAW,KAAgB;QACzB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACxC,CAAC;IAED,8CAAS,GAAT;QAAA,iBAGC;QAFC,IAAI,CAAC,OAAO;aACT,OAAO,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,EAAvC,CAAuC,CAAC,CAAC;IAC/D,CAAC;IAED,8CAAS,GAAT;QAAA,iBAGC;QAFC,IAAI,CAAC,OAAO;aACT,OAAO,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,KAAK,CAAC,EAAxC,CAAwC,CAAC,CAAC;IAChE,CAAC;IAiBH,iCAAC;AAAD,CAtDA,AAsDC,CAtD+C,2BAA2B;;AAsCpE,qCAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;gBACxB,QAAQ,EAAE,qBAAqB;gBAC/B,MAAM,EAAE,CAAC,0IAA0I;oBACrJ,2LAA2L,CAAC;gBAC1L,QAAQ,EAAE,6oBAA6oB;gBACvpB,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD,EAAG,EAAE;CACL,CAAC;AACF,kBAAkB;AACX,yCAAc,GAAmE,cAAM,OAAA;IAC9F,EAAC,IAAI,EAAE,cAAc,GAAG;IACxB,EAAC,IAAI,EAAE,eAAe,GAAG;IACzB,EAAC,IAAI,EAAE,gBAAgB,GAAG;IAC1B,EAAC,IAAI,EAAE,iBAAiB,GAAG;CAC1B,EAL6F,CAK7F,CAAC","file":"patches-console-tab.component.js","sourceRoot":"","sourcesContent":["/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  OnInit,\n  ChangeDetectorRef\n} from '@angular/core';\n\nimport { AbstractSubscriberComponent } from '../../abstract-subscriber';\nimport { DomUtilService, PathUtilService, JsonStoreService } from '../../shared/services';\nimport { JsonPatch } from '../../shared/interfaces';\n\n\nexport class PatchesConsoleTabComponent extends AbstractSubscriberComponent implements OnInit {\n\n  patches: Array<JsonPatch> = [];\n\n  constructor(private domUtilService: DomUtilService,\n    private pathUtilService: PathUtilService,\n    private jsonStoreService: JsonStoreService,\n    private changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnInit() {\n    this.jsonStoreService.patchesByPath$\n      .map(patchesByPath => {\n        return Object.keys(patchesByPath)\n          .map(path => patchesByPath[path])\n          .reduce((pre, cur) => pre.concat(cur), []);\n      })\n      .takeUntil(this.isDestroyed)\n      .subscribe(patches => {\n        this.patches = patches;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  focusPatch(patch: JsonPatch) {\n    this.domUtilService.focusPatch(patch);\n  }\n\n  acceptAll() {\n    this.patches\n      .forEach(patch => this.jsonStoreService.applyPatch(patch));\n  }\n\n  rejectAll() {\n    this.patches\n      .forEach(patch => this.jsonStoreService.rejectPatch(patch));\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'patches-console-tab',\n  styles: [\".list-group-item { cursor: pointer; color: #0074D9; } .list-group-item:hover { background-color: #faebcc; text-decoration: underline; } \",\n\".fa-bolt { color: #e67e22; } .icon-padding-left { padding-left: 8px; } .all-actions-container { padding: 8px; } .all-actions-container > button { margin-right: 4px; margin-left: 4px; } \"],\n  template: \"<ng-template tabHeading> <i class=\\\"fa fa-bolt\\\"></i> Conflicts <span class=\\\"badge\\\">{{patches.length}}</span> </ng-template> <div *ngIf=\\\"patches && patches.length > 0\\\" class=\\\"all-actions-container\\\"> <button class=\\\"btn btn-success\\\" (click)=\\\"acceptAll()\\\">Accept All<i class=\\\"fa fa-check icon-padding-left\\\"></i></button> <button class=\\\"btn btn-danger\\\" (click)=\\\"rejectAll()\\\">Reject All<i class=\\\"fa fa-times icon-padding-left\\\"></i></button> </div> <ul class=\\\"list-group\\\"> <li *ngFor=\\\"let patch of patches\\\" class=\\\"list-group-item\\\" (click)=\\\"focusPatch(patch)\\\"> <i class=\\\"fa fa-bolt\\\"></i> {{patch.path}} - {{patch.op}} </li> </ul> \",\n  changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: DomUtilService, },\n{type: PathUtilService, },\n{type: JsonStoreService, },\n{type: ChangeDetectorRef, },\n];\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}